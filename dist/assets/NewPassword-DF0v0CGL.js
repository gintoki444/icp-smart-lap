import{u as x,r as i,j as s,b as j,l as f,F as a,I as d,a as c,B as N,N as b,i as g}from"./index-DZpC_pHZ.js";import{u as k,c as v,a as l,b as C}from"./formik.esm-DH0jrOO4.js";import{C as m}from"./Card-ZCMDsCmS.js";const S=()=>{const h=x(),[r,p]=i.useState(!1),[o,u]=i.useState(!1),e=k({initialValues:{token:"",password:"",confirmPassword:""},validationSchema:v({token:l().length(6,"Token ต้องมี 6 ตัวอักษร").required("กรุณากรอก Token"),password:l().min(8,"รหัสผ่านต้องมีอย่างน้อย 8 ตัวอักษร").matches(/[0-9]/,"รหัสผ่านต้องมีตัวเลขอย่างน้อย 1 ตัว").matches(/[A-Z]/,"รหัสผ่านต้องมีตัวอักษรพิมพ์ใหญ่อย่างน้อย 1 ตัว").matches(/[^A-Za-z0-9]/,"รหัสผ่านต้องมีอักขระพิเศษอย่างน้อย 1 ตัว").required("กรุณากรอกรหัสผ่าน"),confirmPassword:l().oneOf([C("password"),null],"รหัสผ่านไม่ตรงกัน").required("กรุณายืนยันรหัสผ่าน")}),onSubmit:n=>{console.log("Reset Password:",n);try{const t={token:n.token,newPassword:n.password};g(t).then(w=>{w.message!=="Token ไม่ถูกต้องหรือหมดอายุ"&&(alert("รีเซ็ตรหัสผ่านสำเร็จ! กรุณาเข้าสู่ระบบด้วยรหัสผ่านใหม่"),h("/auth/signin"))})}catch(t){alert(t)}}});return s.jsx(j.Fragment,{children:s.jsx("div",{className:"auth-wrapper",children:s.jsxs("div",{className:"auth-content",children:[s.jsxs("div",{className:"auth-bg",children:[s.jsx("span",{className:"r"}),s.jsx("span",{className:"r s"}),s.jsx("span",{className:"r s"}),s.jsx("span",{className:"r"})]}),s.jsx(m,{className:"borderless text-center",children:s.jsxs(m.Body,{children:[s.jsx("div",{className:"mb-4",children:s.jsx("img",{className:"img-fluid",src:f,alt:"logo",width:120})}),s.jsx("h3",{className:"mb-4",children:"New Password"}),s.jsxs(a,{onSubmit:e.handleSubmit,children:[s.jsxs(a.Group,{className:"mb-3",children:[s.jsx(a.Control,{type:"text",placeholder:"Enter Token",name:"token",value:e.values.token,onChange:e.handleChange,onBlur:e.handleBlur,isInvalid:!!e.errors.token&&e.touched.token}),s.jsx(a.Control.Feedback,{type:"invalid",children:e.errors.token})]}),s.jsxs(a.Group,{className:"mb-3 position-relative",children:[s.jsx(a.Control,{type:r?"text":"password",placeholder:"Enter new password",name:"password",value:e.values.password,onChange:e.handleChange,onBlur:e.handleBlur,isInvalid:!!e.errors.password&&e.touched.password}),s.jsx("span",{className:"position-absolute",style:{right:e.errors.password?30:"10px",top:e.errors.password?"30%":"50%",transform:"translateY(-50%)",cursor:"pointer"},onClick:()=>p(!r),children:r?s.jsx(d,{size:20}):s.jsx(c,{size:20})}),s.jsx(a.Control.Feedback,{type:"invalid",children:e.errors.password})]}),s.jsxs(a.Group,{className:"mb-3 position-relative",children:[s.jsx(a.Control,{type:o?"text":"password",placeholder:"Confirm new password",name:"confirmPassword",value:e.values.confirmPassword,onChange:e.handleChange,onBlur:e.handleBlur,isInvalid:!!e.errors.confirmPassword&&e.touched.confirmPassword}),s.jsx("span",{className:"position-absolute",style:{right:e.errors.password?30:"10px",top:e.errors.password?"30%":"50%",transform:"translateY(-50%)",cursor:"pointer"},onClick:()=>u(!o),children:o?s.jsx(d,{size:20}):s.jsx(c,{size:20})}),s.jsx(a.Control.Feedback,{type:"invalid",children:e.errors.confirmPassword})]}),s.jsx(N,{variant:"primary",type:"submit",className:"btn-block mb-4",children:"Reset Password"})]}),s.jsxs("p",{className:"mb-1 text-muted",children:["Remember your password?"," ",s.jsx(b,{to:"/auth/signin",className:"f-w-400",children:"Login"})]})]})})]})})})};export{S as default};
