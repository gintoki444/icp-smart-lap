import{d as F,r as y,j as e,R as r,C as c,F as n,B as h,y as u}from"./index-BnqE3Rwp.js";import{F as g,c as k,a as l}from"./formik.esm-CDJOjLuD.js";import{p as S}from"./customerRequest-BSWKX1-j.js";import{a as q}from"./specialConditionsRequest-DVpIoZFL.js";import{C as p}from"./Card-BpOPiakr.js";function E(){const j=F(),[_,b]=y.useState([]);y.useEffect(()=>{C()},[]);const C=()=>{q().then(s=>{s&&b(s)})},f={company_code:"",company_name:"",company_address:"",document_address:"",tax_id:"",email:"",phone:"",condition_id:"",special_conditions:""},v=()=>k({company_code:l().min(3,"รหัสบริษัทต้องมีอย่างน้อย 3 ตัวอักษร").required("กรุณากรอกรหัสบริษัท"),company_name:l().required("กรุณากรอกชื่อบริษัท"),tax_id:l().matches(/^[0-9]{10,13}$/,"เลขที่ผู้เสียภาษีต้องมี 10 ถึง 13 หลัก").required("กรุณากรอกเลขที่ผู้เสียภาษี"),company_address:l().required("กรุณากรอกที่อยู่บริษัท"),document_address:l().min(3,"ที่อยู่จัดส่งเอกสารต้องมีอย่างน้อย 3 ตัวอักษร").required("กรุณากรอกที่อยู่จัดส่งเอกสาร"),email:l().email("รูปแบบอีเมล์ไม่ถูกต้อง").required("กรุณากรอกอีเมล์"),phone:l().matches(/^[0-9]{10}$/,"กรุณากรอกเบอร์โทรศัพท์ให้ถูกต้อง (10 หลัก)").required("กรุณากรอกเบอร์โทรศัพท์"),condition_id:l().required("กรุณาเลือกเงื่อนไขพิเศษ")}),N=async(s,{setErrors:a,setStatus:i,setSubmitting:d})=>{var o;try{s.special_conditions=(o=_.find(t=>t.condition_id===Number(s.condition_id)))==null?void 0:o.description,console.log("values :",s),(await S(s)).company_id&&(u.success("เพิ่มข้อมูลบริษัทสำเร็จ!",{autoClose:3e3}),j("/admin/customer/"))}catch(m){u.error(`เพิ่มข้อมูลไม่สำเร็จ: ${m.message}`,{autoClose:3e3}),i({success:!1}),a({submit:m.message}),d(!1)}};return e.jsx(r,{children:e.jsxs(p,{children:[e.jsx(p.Header,{children:e.jsx(r,{children:e.jsx(c,{children:e.jsx(p.Title,{as:"h5",children:"เพิ่มข้อมูลบริษัท"})})})}),e.jsx(p.Body,{children:e.jsx(g,{initialValues:f,validationSchema:v,onSubmit:N,children:({values:s,errors:a,touched:i,handleChange:d,handleBlur:o,handleSubmit:m,isSubmitting:t})=>e.jsxs(n,{onSubmit:m,children:[e.jsxs(r,{children:[e.jsx(c,{md:6,children:e.jsxs(n.Group,{className:"mb-2",children:[e.jsx(n.Label,{children:"รหัสบริษัท:"}),e.jsx(n.Control,{type:"text",className:"form-control",placeholder:"รหัสบริษัท",name:"company_code",value:s.company_code,onChange:d,onBlur:o,isInvalid:i.company_code&&!!a.company_code}),i.company_code&&a.company_code&&e.jsx(n.Control.Feedback,{type:"invalid",children:a.company_code})]})}),e.jsx(c,{md:6,children:e.jsxs(n.Group,{className:"mb-2",children:[e.jsx(n.Label,{children:"ชื่อบริษัท :"}),e.jsx(n.Control,{type:"text",className:"form-control",placeholder:"ชื่อบริษัท",name:"company_name",value:s.company_name,onChange:d,onBlur:o,isInvalid:i.company_name&&!!a.company_name}),i.company_name&&a.company_name&&e.jsx(n.Control.Feedback,{type:"invalid",children:a.company_name})]})}),e.jsx(c,{md:6,children:e.jsxs(n.Group,{className:"mb-2",children:[e.jsx(n.Label,{children:"เลขที่ผู้เสียภาษี :"}),e.jsx(n.Control,{type:"text",className:"form-control",placeholder:"เลขที่ผู้เสียภาษี",name:"tax_id",value:s.tax_id,onChange:d,onBlur:o,isInvalid:i.tax_id&&!!a.tax_id}),i.tax_id&&a.tax_id&&e.jsx(n.Control.Feedback,{type:"invalid",children:a.tax_id})]})}),e.jsx(c,{md:6,children:e.jsxs(n.Group,{className:"mb-2",children:[e.jsx(n.Label,{children:"ที่อยู่บริษัท :"}),e.jsx(n.Control,{type:"text",className:"form-control",placeholder:"ที่อยู่บริษัท",name:"company_address",value:s.company_address,onChange:d,onBlur:o,isInvalid:i.company_address&&!!a.company_address}),i.company_address&&a.company_address&&e.jsx(n.Control.Feedback,{type:"invalid",children:a.company_address})]})}),e.jsx(c,{md:6,children:e.jsxs(n.Group,{className:"mb-2",children:[e.jsx(n.Label,{children:"ที่อยู่จัดส่งเอกสาร :"}),e.jsx(n.Control,{type:"text",className:"form-control",placeholder:"ที่อยู่จัดส่งเอกสาร",name:"document_address",value:s.document_address,onChange:d,onBlur:o,isInvalid:i.document_address&&!!a.document_address}),i.document_address&&a.document_address&&e.jsx(n.Control.Feedback,{type:"invalid",children:a.document_address})]})}),e.jsx(c,{md:6,children:e.jsxs(n.Group,{className:"mb-2",children:[e.jsx(n.Label,{children:"อีเมล์ :"}),e.jsx(n.Control,{type:"email",className:"form-control",placeholder:"อีเมล์",name:"email",value:s.email,onChange:d,onBlur:o,isInvalid:i.email&&!!a.email}),i.email&&a.email&&e.jsx(n.Control.Feedback,{type:"invalid",children:a.email})]})}),e.jsx(c,{md:6,children:e.jsxs(n.Group,{className:"mb-2",children:[e.jsx(n.Label,{children:"เบอร์โทรศัพท์ :"}),e.jsx(n.Control,{type:"text",className:"form-control",placeholder:"เบอร์โทรศัพท์",name:"phone",value:s.phone,onChange:d,onBlur:o,isInvalid:i.phone&&!!a.phone}),i.phone&&a.phone&&e.jsx(n.Control.Feedback,{type:"invalid",children:a.phone})]})}),e.jsx(c,{md:6,children:e.jsxs(n.Group,{className:"mb-2",children:[e.jsx(n.Label,{children:"เงื่อนไขพิเศษ :"}),e.jsxs(n.Select,{name:"condition_id",style:{padding:"10px 20px"},value:s.condition_id,onChange:d,onBlur:o,isInvalid:i.condition_id&&!!a.condition_id,children:[e.jsx("option",{value:"",children:"เลือกเงื่อนไขพิเศษ"}),_.map(x=>e.jsx("option",{value:x.condition_id,children:x.description},x.condition_id))]}),i.condition_id&&a.condition_id&&e.jsx(n.Control.Feedback,{type:"invalid",children:a.condition_id})]})})]}),e.jsx(r,{className:"mt-3",children:e.jsxs(c,{children:[e.jsx(h,{variant:"primary",type:"submit",disabled:t,children:t?e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"feather icon-save"})," บันทึก"]})}),e.jsxs(h,{variant:"danger",onClick:()=>j("/admin/customer"),className:"ms-2",children:[e.jsx("i",{className:"feather icon-corner-up-left"})," ย้อนกลับ"]})]})})]})})})]})})}export{E as default};
