import{u as d,j as e,b as u,R as h,l as x,C as j,F as n,B as p,N as i,c as b}from"./index-DZpC_pHZ.js";import{u as k,c as N,a as v}from"./formik.esm-DH0jrOO4.js";import{C as l}from"./Card-ZCMDsCmS.js";import{A as g}from"./Alert-Dwi6VePK.js";import"./CloseButton-DgEPtGiG.js";import"./Transition-DW97tWQD.js";const B=()=>{const c=d(),s=k({initialValues:{token:"",submit:null},validationSchema:N({token:v().length(4,"Token ต้องมี 4 ตัวอักษร").required("กรุณากรอก Token")}),onSubmit:async(o,{setErrors:m,setSubmitting:r})=>{r(!0);try{(await b(o.token)).message==="Account activated successfully. You can now log in."&&(alert("ยืนยันอีเมล์สำเร็จ!"),c("/auth/activate-success"))}catch(a){let t="เกิดข้อผิดพลาดในการยืนยันอีเมล์";a.message.includes("400")?t="Token ไม่ถูกต้อง กรุณาตรวจสอบอีกครั้ง":a.message.includes("404")?t="ไม่พบ Token นี้ กรุณาขอ Token ใหม่":a.message.includes("500")&&(t="เกิดข้อผิดพลาดในระบบ กรุณาลองใหม่ภายหลัง"),m({submit:t})}finally{r(!1)}}});return e.jsx(u.Fragment,{children:e.jsx("div",{className:"auth-wrapper",children:e.jsxs("div",{className:"auth-content text-center",children:[e.jsxs("div",{className:"auth-bg",children:[e.jsx("span",{className:"r"}),e.jsx("span",{className:"r s"}),e.jsx("span",{className:"r s"}),e.jsx("span",{className:"r"})]}),e.jsx(l,{className:"borderless text-center",children:e.jsx(l.Body,{children:e.jsxs(h,{className:"justify-content-center",children:[e.jsx("div",{className:"mb-0",children:e.jsx("img",{className:"img-fluid",src:x,alt:"logo",width:120})}),e.jsxs(j,{md:12,children:[e.jsx("h3",{className:"mb-4",children:"Activate E-mail"}),e.jsxs("p",{className:"mb-4",children:["กรอก Token ที่ได้รับจาก ",e.jsx("br",{}),"อีเมล์เพื่อยืนยันตัวตน"]}),e.jsxs(n,{onSubmit:s.handleSubmit,children:[e.jsxs(n.Group,{className:"mb-3",children:[e.jsx(n.Control,{type:"text",placeholder:"Enter Token",name:"token",value:s.values.token,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:!!s.errors.token&&s.touched.token}),e.jsx(n.Control.Feedback,{type:"invalid",children:s.errors.token})]}),s.errors.submit&&e.jsx(g,{variant:"danger",className:"mb-3",children:s.errors.submit}),e.jsx(p,{variant:"primary",type:"submit",className:"btn-block mb-4",disabled:s.isSubmitting,children:"Activate"})]}),e.jsx("p",{className:"mb-2 text-muted",children:e.jsx(i,{to:"/auth/resend-token",className:"f-w-400",children:"Re-send activate token?"})}),e.jsxs("p",{className:"mb-2 text-muted",children:["Already have an account?"," ",e.jsx(i,{to:"/auth/signin",className:"f-w-400",children:"Login"})]})]})]})})})]})})})};export{B as default};
