import{r as i,u as A,h as E,D as T,j as t,B as h,i as k,E as b,k as D,F,w as I,H as L,y as v,J as R}from"./index-6YeC_AS5.js";import{a as B}from"./emailRequest-DbDPYP9A.js";import{p as z}from"./telegramNotifyRequest-BwpORK4f.js";import{C as _}from"./Card-BhOVTKNa.js";import{S as P}from"./Stack-DS5MSRky.js";import{F as O}from"./Form-CGCyrcfL.js";import{B as G}from"./Badge-C_mrIdUk.js";import{D as H,B as Y}from"./DataGrid-DoczE-38.js";import"./DefaultPropsProvider-2RhE6zQB.js";import"./emotion-element-f0de968e.browser.esm-C-W82wov.js";import"./TextField-DmQ6Lsg1.js";import"./toPropertyKey-CTo9CRTC.js";import"./Transition-rt6HDaS9.js";import"./setPrototypeOf-DgZC2w_0.js";import"./Divider-mvYdwXE_.js";const J=async(r,l,g)=>{const c=r.fullName||`${r.first_name} ${r.last_name}`,s=r.email||"-",f=r.phone||"-",p=r.role_name||"-",w=l.username||"-",u=l.email||"-",d=l.role||"-",x=new Date().toLocaleString("th-TH",{dateStyle:"long",timeStyle:"short"}),n=g==="Y",j=`
${n?"âœ… *à¸£à¸°à¸šà¸šà¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™*":"âš ï¸ *à¸£à¸°à¸šà¸šà¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¸¢à¸à¹€à¸¥à¸´à¸à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™*"}
--------------------------------------
ðŸ‘¤ *à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™:* ${c}
ðŸ“§ *à¸­à¸µà¹€à¸¡à¸¥:* ${s}
ðŸ“± *à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£:* ${f}
ðŸ›¡ï¸ *à¸ªà¸´à¸—à¸˜à¸´à¹Œà¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™:* ${p}

ðŸ“ *à¸œà¸¹à¹‰${n?"à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´":"à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£"}:* ${w} (${d})
ðŸ“§ *à¸­à¸µà¹€à¸¡à¸¥à¸œà¸¹à¹‰${n?"à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´":"à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£"}:* ${u}
ðŸ“… *à¸§à¸±à¸™à¸—à¸µà¹ˆ${n?"à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´":"à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£"}:* ${x}
`.trim();if(n){const m={toEmail:r.email,subject:"à¹à¸ˆà¹‰à¸‡à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸£à¸°à¸šà¸š ICP Smart Lab",message:`
à¹€à¸£à¸µà¸¢à¸™à¸„à¸¸à¸“ ${c},

à¸šà¸±à¸à¸Šà¸µà¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸”à¹‰à¸£à¸±à¸šà¸à¸²à¸£ *à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´* à¹ƒà¸«à¹‰à¹€à¸‚à¹‰à¸²à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸£à¸°à¸šà¸š ICP Smart Lab à¹à¸¥à¹‰à¸§à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢

à¸„à¸¸à¸“à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¹€à¸žà¸·à¹ˆà¸­à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹„à¸”à¹‰à¸—à¸±à¸™à¸—à¸µà¸œà¹ˆà¸²à¸™à¸¥à¸´à¸‡à¸à¹Œ:
ðŸŒ https://icp-smartlab.com/login

à¸«à¸²à¸à¸„à¸¸à¸“à¸¡à¸µà¸„à¸³à¸–à¸²à¸¡à¸«à¸£à¸·à¸­à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸„à¸§à¸²à¸¡à¸Šà¹ˆà¸§à¸¢à¹€à¸«à¸¥à¸·à¸­ à¸à¸£à¸¸à¸“à¸²à¸•à¸´à¸”à¸•à¹ˆà¸­à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸šà¸‚à¸­à¸‡à¸„à¸¸à¸“

à¸‚à¸­à¸‚à¸­à¸šà¸„à¸¸à¸“,
à¸—à¸µà¸¡à¸‡à¸²à¸™ ICP Smart Lab
      `.trim(),username:c};try{await B({textMail:m}),console.log("ðŸ“§ à¸ªà¹ˆà¸‡à¸­à¸µà¹€à¸¡à¸¥à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢à¹à¸¥à¹‰à¸§")}catch(S){console.error("âŒ à¸ªà¹ˆà¸‡à¸­à¸µà¹€à¸¡à¸¥à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ:",S)}}try{await z({message:j}),console.log("ðŸ“¨ à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™ Telegram à¸ªà¸³à¹€à¸£à¹‡à¸ˆ")}catch(m){console.error("âŒ à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ Telegram:",m)}},ne=()=>{const[r,l]=i.useState([]),[g,c]=i.useState([]),[s,f]=i.useState(()=>localStorage.getItem("filterText")||""),[p,w]=i.useState(g),u=A();i.useEffect(()=>{const e=localStorage.getItem("authToken");e&&E(e).then(a=>{l(a.user)}),d()},[]),i.useEffect(()=>{},[p]);const d=()=>{T().then(e=>{if(e){const a=e.map((o,N)=>({id:o.user_id,No:N+1,first_name:o.first_name,last_name:o.last_name,fullName:`${o.first_name} ${o.last_name}`,email:o.email,phone:o.phone,role_id:o.role_id,role_name:o.role_name,dept_id:o.dept_id,dept_name:o.dept_name,createdAt:new Date(o.created_at).toLocaleString(),status:o.status}));c(a),w(a)}})},x=[{field:"No",headerName:"No.",width:90,headerAlign:"center",align:"center"},{field:"fullName",headerName:"à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥",flex:1},{field:"email",headerName:"E-mail",flex:1},{field:"phone",headerName:"à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸žà¸—à¹Œ",flex:1},{field:"role_name",headerName:"Roles",width:120,headerAlign:"center",align:"center"},{field:"createdAt",headerName:"à¸§à¸±à¸™à¸—à¸µà¹ˆà¸ªà¸£à¹‰à¸²à¸‡",flex:1},{field:"status",headerName:"à¸ªà¸–à¸²à¸™à¸°",width:120,headerAlign:"center",align:"center",renderCell:e=>t.jsx(G,{pill:!0,style:{},bg:e.row.status==="pending"?"warning":e.row.status==="rejected"?"danger":"success",children:e.row.status==="pending"?"à¸£à¸­à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´":e.row.status==="rejected"?"à¹„à¸¡à¹ˆà¸­à¸™à¸¸à¸¡à¸±à¸•à¸´":"à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´"})},{field:"actions",headerName:"Action",width:200,headerAlign:"center",align:"center",renderCell:e=>t.jsxs(Y,{children:[t.jsx(h,{variant:e.row.status==="pending"||e.row.status==="rejected"?"outline-success":"outline-warning",size:"sm",onClick:()=>m(e.row.id,e.row.status==="pending"||e.row.status==="rejected"?"Y":"N",e.row),children:e.row.status==="pending"||e.row.status==="rejected"?t.jsx(b,{}):t.jsx(D,{})}),t.jsx(h,{variant:"info",size:"sm",onClick:()=>j(e.row),children:t.jsx(F,{})}),t.jsx(h,{variant:"outline-danger",size:"sm",onClick:()=>S(e.row.id),children:t.jsx(I,{})})]})}],n=p.filter(e=>Object.values(e).some(a=>a&&a.toString().toLowerCase().includes(s.toLowerCase())));i.useEffect(()=>{localStorage.setItem("filterText",s)},[s]);const C=()=>{f(""),localStorage.removeItem("filterText")},j=e=>{u("/admin/user/edit",{state:{users:e}})},m=(e,a,o)=>{if(window.confirm("à¸„à¸¸à¸“à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰ à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?")){const $={approver_id:r.user_id,is_approved_user:a==="Y"};try{L($,e).then(()=>{v.success("à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!",{autoClose:3e3}),J(o,r,a),d()})}catch(y){v.error(`à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ: ${y}`,{autoClose:3e3})}}},S=e=>{if(window.confirm(`à¸„à¸¸à¸“à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸«à¸¡à¸²à¸¢à¹€à¸¥à¸‚ ${e} à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?`))try{R(e).then(()=>{d()})}catch(o){alert("à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ:",o)}};return t.jsx("div",{className:"",children:t.jsxs(_,{children:[t.jsx(_.Header,{children:t.jsx("h5",{children:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸£à¸²à¸¢à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™"})}),t.jsxs(_.Body,{className:"p-10",children:[t.jsxs(P,{direction:"row",spacing:1,sx:{mb:2},children:[t.jsx(O.Control,{type:"text",placeholder:"Search",value:s,onChange:e=>f(e.target.value)}),t.jsx(h,{variant:"primary",size:"sm",color:"secondary",onClick:C,disabled:!s,children:t.jsx(k,{style:{fontSize:20}})}),t.jsxs(h,{variant:"success",size:"sm",onClick:()=>u("/admin/user/add"),children:[t.jsx("i",{className:"feather icon-plus-circle"}),"à¹€à¸žà¸´à¹ˆà¸¡"]})]}),t.jsx(H,{rows:n,columns:x,pageSize:5,rowsPerPageOptions:[5,10,20],pagination:!0,disableSelectionOnClick:!0,hideFooterSelectedRowCount:!0})]})]})})};export{ne as default};
