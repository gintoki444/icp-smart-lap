import{G as z,j as e,C,R as D,L as x,q as T,s as E,t as I,r as l}from"./index-BHSqYlV9.js";import{t as L}from"./resultsTestData-CJN3BdsU.js";import{f as $}from"./format-CBpsKyOP.js";import{T as V}from"./Table-GHG1mziN.js";import{R as S}from"./Row-4QVMY7bz.js";import{C as b}from"./Col-Ck7c_TKm.js";function R(o){return z({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 8.04a803.533 803.533 0 0 0 -4 3.96m-2 2c-1.085 1.085 -3.125 3.14 -6.122 6.164a2.857 2.857 0 0 1 -4.041 -4.04c3.018 -3 5.073 -5.037 6.163 -6.124m2 -2c.872 -.872 2.191 -2.205 3.959 -4"},child:[]},{tag:"path",attr:{d:"M7 13h6"},child:[]},{tag:"path",attr:{d:"M19 15l1.5 1.6m-.74 3.173a2 2 0 0 1 -2.612 -2.608"},child:[]},{tag:"path",attr:{d:"M15 3l6 6"},child:[]},{tag:"path",attr:{d:"M3 3l18 18"},child:[]}]})(o)}function O(o){return z({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 8.04l-12.122 12.124a2.857 2.857 0 1 1 -4.041 -4.04l12.122 -12.124"},child:[]},{tag:"path",attr:{d:"M7 13h8"},child:[]},{tag:"path",attr:{d:"M19 15l1.5 1.6a2 2 0 1 1 -3 0l1.5 -1.6z"},child:[]},{tag:"path",attr:{d:"M15 3l6 6"},child:[]}]})(o)}function H(o){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M4.99787498,5.99999999 L4.99787498,0.999999992 L19.4999998,0.999999992 L22.9999998,4.50000005 L23,23 L20,23 M18,1 L18,6 L23,6 M6,9 L14,9 M8,9 L8,13.5 L3,21.5 L3,23 L17,23 L17,21.4188612 L12,13.5 L12,9 M5.5,17.5 C5.5,17.5 7.5,19.0000002 10,17.5000001 C12.5,16 14.5,17.5000001 14.5,17.5000001"},child:[]}]})(o)}const Q=()=>{const o=$(new Date,"dd/MM/yyyy"),n=["Customer Code","Sample No.","Sample Code","Description","Sample Appearance","Request No.",...Object.keys(L[0].testItems).filter(t=>L.some(s=>s.testItems[t]!==null))];return e.jsx("div",{className:"",children:e.jsxs(C,{children:[e.jsx(C.Header,{children:e.jsxs("h5",{children:["สรุปข้อมูลผลรวมการทดสอบประจำวัน : ",o]})}),e.jsx(C.Body,{className:"p-0",children:e.jsxs(V,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"mb-0",children:[e.jsx("thead",{children:e.jsx("tr",{children:n.map((t,s)=>e.jsx("th",{children:t},s))})}),e.jsx("tbody",{children:L.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.customerCode}),e.jsx("td",{children:t.sampleNo}),e.jsx("td",{children:t.sampleCode}),e.jsx("td",{children:t.description}),e.jsx("td",{children:t.sampleAppearance}),e.jsx("td",{children:t.requestNo}),n.slice(6).map(r=>e.jsx("td",{children:t.testItems[r]!==null?t.testItems[r]:"-"},r))]},s))})]})})]})})},J=[{title:"จำวนคำขอใช้บริการทั้งหมด",amount:"150",unit:"รายการ",icon:"",iconNew:e.jsx(H,{className:"text-c-green",style:{marginRight:12}}),value:100,class:"progress-c-theme"},{title:"จำนวนการทดสอบกำลังทดสอบ",amount:"45",unit:"รายการ",icon:"",iconNew:e.jsx(O,{className:"text-c-blue",style:{marginRight:12}}),value:30,class:"progress-c-theme2"},{title:"จำนวนการทดสอบที่ยังไม่ทดสอบ",amount:"105",unit:"รายการ",icon:"",iconNew:e.jsx(R,{className:"text-c-red",style:{marginRight:12}}),value:70,color:"progress-c-theme"}],K=()=>(D.Fragment,x,T,x,E,x,I,x,T,x,E,x,I,e.jsx(D.Fragment,{children:e.jsxs(S,{children:[J.map((o,n)=>e.jsx(b,{xl:6,xxl:4,children:e.jsx(C,{children:e.jsxs(C.Body,{children:[e.jsx("h6",{className:"mb-4",children:o.title}),e.jsxs("div",{className:"row d-flex align-items-center",children:[e.jsx("div",{className:"col-9",children:e.jsxs("h3",{className:"f-w-300 d-flex align-items-center m-b-0",children:[o.icon&&e.jsx("i",{className:`feather ${o.icon} f-30 m-r-5`}),o.iconNew&&o.iconNew,o.amount," ",o.unit]})}),e.jsx("div",{className:"col-3 text-end",children:e.jsxs("p",{className:"m-b-0",children:[o.value,"%"]})})]}),e.jsx("div",{className:"progress m-t-30",style:{height:"7px"},children:e.jsx("div",{className:`progress-bar ${o.class}`,role:"progressbar",style:{width:`${o.value}%`},"aria-valuenow":o.value,"aria-valuemin":"0","aria-valuemax":"100"})})]})})},n)),e.jsx(b,{md:12,children:e.jsx(Q,{})})]})}));function Y(o,n,t){l.useEffect(()=>{if(!document)return;const s=document.querySelector('script[src="'.concat(o,'"]'));if(s!=null&&s.dataset.loaded){n==null||n();return}const r=s||document.createElement("script");s||(r.src=o);const a=()=>{r.dataset.loaded="1",n==null||n()};r.addEventListener("load",a),t&&r.addEventListener("error",t),s||document.head.append(r)},[])}function X(o){let{chartVersion:n="current",chartPackages:t=["corechart","controls"],chartLanguage:s="en",mapsApiKey:r}=o;const[a,i]=l.useState(null),[d,m]=l.useState(!1);return Y("https://www.gstatic.com/charts/loader.js",()=>{const c=window==null?void 0:window.google;c&&(c.charts.load(n,{packages:t,language:s,mapsApiKey:r}),c.charts.setOnLoadCallback(()=>{i(c)}))},()=>{m(!0)}),[a,d]}function Z(o){let{onLoad:n,onError:t,...s}=o;const[r,a]=X(s);return l.useEffect(()=>{r&&n&&n(r)},[r]),l.useEffect(()=>{a&&t&&t()},[a]),null}const B={legend_toggle:!1,options:{},legendToggle:!1,getChartWrapper:()=>{},spreadSheetQueryParameters:{headers:1,gid:1},rootProps:{},chartWrapperParams:{}};let W=0;const ee=()=>(W+=1,"reactgooglegraph-".concat(W)),te=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],se=async function(o,n){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((s,r)=>{const a="".concat(t.headers?"headers=".concat(t.headers):"headers=0"),i="".concat(t.query?"&tq=".concat(encodeURIComponent(t.query)):""),d="".concat(t.gid?"&gid=".concat(t.gid):""),m="".concat(t.sheet?"&sheet=".concat(t.sheet):""),c="".concat(t.access_token?"&access_token=".concat(t.access_token):""),h="".concat(a).concat(d).concat(m).concat(i).concat(c),u="".concat(n,"/gviz/tq?").concat(h);new o.visualization.Query(u).send(v=>{v.isError()?r("Error in query:  ".concat(v.getMessage()," ").concat(v.getDetailedMessage())):s(v.getDataTable())})})},{Provider:re,Consumer:ae}=l.createContext(B),ne=o=>{let{children:n,value:t}=o;return l.createElement(re,{value:t},n)},_=o=>{let{render:n}=o;return l.createElement(ae,null,t=>n(t))},oe="#CCCCCC";class ie extends l.Component{componentDidMount(){this.draw(this.props),window.addEventListener("resize",this.onResize),(this.props.legend_toggle||this.props.legendToggle)&&this.listenToLegendToggle()}componentWillUnmount(){const{google:n,googleChartWrapper:t}=this.props;window.removeEventListener("resize",this.onResize),n.visualization.events.removeAllListeners(t),t.getChartType()==="Timeline"&&t.getChart()&&t.getChart().clearChart()}componentDidUpdate(){this.draw(this.props)}render(){return null}constructor(...n){super(...n),this.state={hiddenColumns:[]},this.listenToLegendToggle=()=>{const{google:t,googleChartWrapper:s}=this.props;t.visualization.events.addListener(s,"select",()=>{const a=s.getChart().getSelection(),i=s.getDataTable();if(a.length===0||a[0].row||!i)return;const d=a[0].column,m=this.getColumnID(i,d);this.state.hiddenColumns.includes(m)?this.setState(c=>({...c,hiddenColumns:[...c.hiddenColumns.filter(h=>h!==m)]})):this.setState(c=>({...c,hiddenColumns:[...c.hiddenColumns,m]}))})},this.applyFormatters=(t,s)=>{const{google:r}=this.props;for(let a of s)switch(a.type){case"ArrowFormat":{new r.visualization.ArrowFormat(a.options).format(t,a.column);break}case"BarFormat":{new r.visualization.BarFormat(a.options).format(t,a.column);break}case"ColorFormat":{const i=new r.visualization.ColorFormat(a.options),{ranges:d}=a;for(let m of d)i.addRange(...m);i.format(t,a.column);break}case"DateFormat":{new r.visualization.DateFormat(a.options).format(t,a.column);break}case"NumberFormat":{new r.visualization.NumberFormat(a.options).format(t,a.column);break}case"PatternFormat":{new r.visualization.PatternFormat(a.options).format(t,a.column);break}}},this.getColumnID=(t,s)=>t.getColumnId(s)||t.getColumnLabel(s),this.draw=async t=>{let{data:s,diffdata:r,rows:a,columns:i,options:d,legend_toggle:m,legendToggle:c,chartType:h,formatters:u,spreadSheetUrl:j,spreadSheetQueryParameters:v}=t;const{google:f,googleChartWrapper:g}=this.props;let p,N=null;if(r){const M=f.visualization.arrayToDataTable(r.old),y=f.visualization.arrayToDataTable(r.new);N=f.visualization[h].prototype.computeDiff(M,y)}s?Array.isArray(s)?p=f.visualization.arrayToDataTable(s):p=new f.visualization.DataTable(s):a&&i?p=f.visualization.arrayToDataTable([i,...a]):j?p=await se(f,j,v):p=f.visualization.arrayToDataTable([]);const w=p.getNumberOfColumns(),U=Array(w).fill(0).map((M,y)=>{const G=this.getColumnID(p,y);return this.state.hiddenColumns.includes(G)?{label:p.getColumnLabel(y),type:p.getColumnType(y),calc:()=>null}:y}),F=g.getChart();g.getChartType()==="Timeline"&&F&&F.clearChart(),g.setChartType(h),g.setOptions(d||{});const A=new f.visualization.DataView(p);A.setColumns(U),g.setDataTable(A),g.draw(),this.props.googleChartDashboard!==null&&this.props.googleChartDashboard.draw(p),N&&(g.setDataTable(N),g.draw()),u&&(this.applyFormatters(p,u),g.setDataTable(p),g.draw()),(c===!0||m===!0)&&this.grayOutHiddenColumns({options:d})},this.grayOutHiddenColumns=t=>{let{options:s}=t;const{googleChartWrapper:r}=this.props,a=r.getDataTable();if(!a)return;const i=a.getNumberOfColumns();if(this.state.hiddenColumns.length>0===!1)return;const m=Array.from({length:i-1}).map((c,h)=>{const u=this.getColumnID(a,h+1);return this.state.hiddenColumns.includes(u)?oe:s&&s.colors?s.colors[h]:te[h]});r.setOptions({...s,colors:m}),r.draw()},this.onResize=()=>{const{googleChartWrapper:t}=this.props;t.draw()}}}class le extends l.Component{componentDidMount(){}componentWillUnmount(){}shouldComponentUpdate(){return!1}render(){const{google:n,googleChartWrapper:t,googleChartDashboard:s}=this.props;return l.createElement(_,{render:r=>l.createElement(ie,Object.assign({},r,{google:n,googleChartWrapper:t,googleChartDashboard:s}))})}}class ce extends l.Component{shouldComponentUpdate(){return!1}listenToEvents(n){let{chartEvents:t,google:s,googleChartWrapper:r}=n;if(t){s.visualization.events.removeAllListeners(r);for(let i of t){var a=this;const{eventName:d,callback:m}=i;s.visualization.events.addListener(r,d,function(){for(var c=arguments.length,h=new Array(c),u=0;u<c;u++)h[u]=arguments[u];m({chartWrapper:r,props:a.props,google:s,eventArgs:h})})}}}componentDidMount(){var n;const{google:t,googleChartWrapper:s}=this.props;this.listenToEvents({chartEvents:((n=this.propsFromContext)===null||n===void 0?void 0:n.chartEvents)||null,google:t,googleChartWrapper:s})}render(){return this.props,l.createElement(_,{render:n=>(this.propsFromContext=n,null)})}constructor(n){super(n),this.propsFromContext=null}}let k=0;class de extends l.Component{componentDidMount(){const{options:n,google:t,chartType:s,chartWrapperParams:r,toolbarItems:a,getChartEditor:i,getChartWrapper:d}=this.props,m={chartType:s,options:n,containerId:this.getGraphID(),...r},c=new t.visualization.ChartWrapper(m);c.setOptions(n||{}),d&&d(c,t);const h=new t.visualization.Dashboard(this.dashboard_ref),u=this.addControls(c,h);a&&t.visualization.drawToolbar(this.toolbar_ref.current,a);let j=null;i&&(j=new t.visualization.ChartEditor,i({chartEditor:j,chartWrapper:c,google:t})),this.setState({googleChartEditor:j,googleChartControls:u,googleChartDashboard:h,googleChartWrapper:c,isReady:!0})}componentDidUpdate(){if(!this.state.googleChartWrapper||!this.state.googleChartDashboard||!this.state.googleChartControls)return;const{controls:n}=this.props;if(n)for(let t=0;t<n.length;t+=1){const{controlType:s,options:r,controlWrapperParams:a}=n[t];a&&"state"in a&&this.state.googleChartControls[t].control.setState(a.state),this.state.googleChartControls[t].control.setOptions(r),this.state.googleChartControls[t].control.setControlType(s)}}shouldComponentUpdate(n,t){return this.state.isReady!==t.isReady||n.controls!==this.props.controls}render(){const{width:n,height:t,options:s,style:r}=this.props,a={height:t||s&&s.height,width:n||s&&s.width,...r};return this.props.render?l.createElement("div",{ref:this.dashboard_ref,style:a},l.createElement("div",{ref:this.toolbar_ref,id:"toolbar"}),this.props.render({renderChart:this.renderChart,renderControl:this.renderControl,renderToolbar:this.renderToolBar})):l.createElement("div",{ref:this.dashboard_ref,style:a},this.renderControl(i=>{let{controlProp:d}=i;return d.controlPosition!=="bottom"}),this.renderChart(),this.renderControl(i=>{let{controlProp:d}=i;return d.controlPosition==="bottom"}),this.renderToolBar())}constructor(...n){var t;super(...n),t=this,this.state={googleChartWrapper:null,googleChartDashboard:null,googleChartControls:null,googleChartEditor:null,isReady:!1},this.graphID=null,this.dashboard_ref=l.createRef(),this.toolbar_ref=l.createRef(),this.getGraphID=()=>{const{graphID:s,graph_id:r}=this.props;let a;return!s&&!r?this.graphID?a=this.graphID:a=ee():s&&!r?a=s:r&&!s?a=r:a=s,this.graphID=a,this.graphID},this.getControlID=(s,r)=>{k+=1;let a;return typeof s>"u"?a="googlechart-control-".concat(r,"-").concat(k):a=s,a},this.addControls=(s,r)=>{const{google:a,controls:i}=this.props,d=i?i.map((c,h)=>{const{controlID:u,controlType:j,options:v,controlWrapperParams:f}=c,g=this.getControlID(u,h);return{controlProp:c,control:new a.visualization.ControlWrapper({containerId:g,controlType:j,options:v,...f})}}):null;if(!d)return null;r.bind(d.map(c=>{let{control:h}=c;return h}),s);for(let c of d){const{control:h,controlProp:u}=c,{controlEvents:j=[]}=u;for(let v of j){var m=this;const{callback:f,eventName:g}=v;a.visualization.events.removeListener(h,g,f),a.visualization.events.addListener(h,g,function(){for(var p=arguments.length,N=new Array(p),w=0;w<p;w++)N[w]=arguments[w];f({chartWrapper:s,controlWrapper:h,props:m.props,google:a,eventArgs:N})})}}return d},this.renderChart=()=>{const{width:s,height:r,options:a,style:i,className:d,rootProps:m,google:c}=this.props,h={height:r||a&&a.height,width:s||a&&a.width,...i};return l.createElement("div",Object.assign({id:this.getGraphID(),style:h,className:d},m),this.state.isReady&&this.state.googleChartWrapper!==null?l.createElement(l.Fragment,null,l.createElement(le,{googleChartWrapper:this.state.googleChartWrapper,google:c,googleChartDashboard:this.state.googleChartDashboard}),l.createElement(ce,{googleChartWrapper:this.state.googleChartWrapper,google:c})):null)},this.renderControl=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r=>!0;return t.state.isReady&&t.state.googleChartControls!==null?l.createElement(l.Fragment,null,t.state.googleChartControls.filter(r=>{let{controlProp:a,control:i}=r;return s({control:i,controlProp:a})}).map(r=>{let{control:a,controlProp:i}=r;return l.createElement("div",{key:a.getContainerId(),id:a.getContainerId()})})):null},this.renderToolBar=()=>this.props.toolbarItems?l.createElement("div",{ref:this.toolbar_ref}):null}}class q extends l.Component{render(){const{chartLanguage:n,chartPackages:t,chartVersion:s,mapsApiKey:r,loader:a,errorElement:i}=this.props;return l.createElement(ne,{value:this.props},this.state.loadingStatus==="ready"&&this.state.google!==null?l.createElement(de,Object.assign({},this.props,{google:this.state.google})):this.state.loadingStatus==="errored"&&i?i:a,l.createElement(Z,{chartLanguage:n,chartPackages:t,chartVersion:s,mapsApiKey:r,onLoad:this.onLoad,onError:this.onError}))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}isFullyLoaded(n){const{controls:t,toolbarItems:s,getChartEditor:r}=this.props;return n&&n.visualization&&n.visualization.ChartWrapper&&n.visualization.Dashboard&&(!t||n.visualization.ChartWrapper)&&(!r||n.visualization.ChartEditor)&&(!s||n.visualization.drawToolbar)}constructor(...n){super(...n),this._isMounted=!1,this.state={loadingStatus:"loading",google:null},this.onLoad=t=>{if(this.props.onLoad&&this.props.onLoad(t),this.isFullyLoaded(t))this.onSuccess(t);else{const s=setInterval(()=>{const r=window.google;this._isMounted?r&&this.isFullyLoaded(r)&&(clearInterval(s),this.onSuccess(r)):clearInterval(s)},1e3)}},this.onSuccess=t=>{this.setState({loadingStatus:"ready",google:t})},this.onError=()=>{this.setState({loadingStatus:"errored"})}}}q.defaultProps=B;var P;(function(o){o.annotation="annotation",o.annotationText="annotationText",o.certainty="certainty",o.emphasis="emphasis",o.interval="interval",o.scope="scope",o.style="style",o.tooltip="tooltip",o.domain="domain"})(P||(P={}));const he=()=>{const o=[{customerCode:"109",sampleNo:"24111203",testItems:{pH:7.7,MC:1,TN:21.1}},{customerCode:"02",sampleNo:"24111301",testItems:{pH:6.5,MC:.8,TN:13,TP:7.9}},{customerCode:"003",sampleNo:"24111302",testItems:{pH:7,MC:.9,TN:15.5,TP:6.2}},{customerCode:"004",sampleNo:"24111303",testItems:{pH:5.5,MC:.7,TN:12,TP:7.1}},{customerCode:"005",sampleNo:"24111304",testItems:{pH:6.8,MC:1.1,TN:18}}],n=o.length;(o.reduce((r,a)=>r+(a.testItems.pH||0),0)/n).toFixed(2);const t=[["Sample No","pH","MC","TN"],...o.map(r=>[r.sampleNo,r.testItems.pH||0,r.testItems.MC||0,r.testItems.TN||0])],s={title:"ผลการทดสอบ",hAxis:{title:"Sample No"},vAxis:{title:"Values"},seriesType:"bars",colors:["#29b6f6","#ff8a65","#4caf50"],series:{3:{type:"line"}}};return e.jsx("div",{className:"",children:e.jsxs(C,{children:[e.jsx(C.Header,{children:e.jsx("h5",{children:"ตารางสรุปผลการทดสอบ"})}),e.jsx(C.Body,{children:e.jsx(S,{children:e.jsx(b,{children:e.jsx(q,{chartType:"ComboChart",data:t,options:s,width:"100%",height:"400px"})})})})]})})},me=[{title:"จำวนคำขอใช้บริการทั้งหมด",amount:"3",unit:"รายการ",icon:"",iconNew:e.jsx(H,{className:"text-c-green",style:{marginRight:12}}),value:100,class:"progress-c-theme"},{title:"จำนวนการทดสอบกำลังทดสอบ",amount:"1",unit:"รายการ",icon:"",iconNew:e.jsx(O,{className:"text-c-blue",style:{marginRight:12}}),value:30,class:"progress-c-theme2"},{title:"จำนวนการทดสอบที่ยังไม่ทดสอบ",amount:"2",unit:"รายการ",icon:"",iconNew:e.jsx(R,{className:"text-c-red",style:{marginRight:12}}),value:70,color:"progress-c-theme"}],ue=()=>(D.Fragment,x,T,x,E,x,I,x,T,x,E,x,I,e.jsx(D.Fragment,{children:e.jsxs(S,{children:[me.map((o,n)=>e.jsx(b,{xl:6,xxl:4,children:e.jsx(C,{children:e.jsxs(C.Body,{children:[e.jsx("h6",{className:"mb-4",children:o.title}),e.jsxs("div",{className:"row d-flex align-items-center",children:[e.jsx("div",{className:"col-9",children:e.jsxs("h3",{className:"f-w-300 d-flex align-items-center m-b-0",children:[o.icon&&e.jsx("i",{className:`feather ${o.icon} f-30 m-r-5`}),o.iconNew&&o.iconNew,o.amount," ",o.unit]})}),e.jsx("div",{className:"col-3 text-end",children:e.jsxs("p",{className:"m-b-0",children:[o.value,"%"]})})]}),e.jsx("div",{className:"progress m-t-30",style:{height:"7px"},children:e.jsx("div",{className:`progress-bar ${o.class}`,role:"progressbar",style:{width:`${o.value}%`},"aria-valuenow":o.value,"aria-valuemin":"0","aria-valuemax":"100"})})]})})},n)),e.jsx(b,{md:12,xl:12,children:e.jsx(he,{})})]})}));function Ce(){const[o,n]=l.useState(localStorage.getItem("userRole"));return l.useEffect(()=>{console.log("userRole:",o);const t=localStorage.getItem("userRole");t||n(t)},[o]),e.jsx(e.Fragment,{children:o==="admin"?e.jsx(K,{}):e.jsx(ue,{})})}export{Ce as default};
