import{r as i,u as S,j as e,B as a,i as C,F as N,v}from"./index-CMKGjvil.js";import{g as T,d as E}from"./testGroupRequest-74lX6Leo.js";import{C as n}from"./Card-ltuRbL1m.js";import{S as D}from"./Stack-_RiFjssk.js";import{F}from"./Form-XAT3KesX.js";import{D as k,B as y}from"./DataGrid-BSrFaLwh.js";import"./DefaultPropsProvider-7CXMMYWk.js";import"./emotion-element-f0de968e.browser.esm-D2ySOhvj.js";import"./TextField-l4tn0KBj.js";import"./toPropertyKey-BZFHAmHd.js";import"./Transition-CvY6YelV.js";import"./setPrototypeOf-DgZC2w_0.js";import"./Divider-Rbts8ePN.js";const K=()=>{const[p,f]=i.useState([]),[s,l]=i.useState(()=>localStorage.getItem("filterText")||""),[c,h]=i.useState(p),d=S();i.useEffect(()=>{m()},[]),i.useEffect(()=>{},[c]);const m=()=>{T().then(t=>{if(t){const o=t.map((r,_)=>({id:r.group_id,No:_+1,group_name_th:r.group_name_th,group_name_en:r.group_name_en,description:r.description,created_at:new Date(r.created_at).toLocaleString()}));f(o),h(o)}})},u=[{field:"No",headerName:"No.",width:90,headerAlign:"center",align:"center"},{field:"group_name_th",headerName:"ชื่อกลุ่มทดสอบ (TH)",flex:.7},{field:"group_name_en",headerName:"ชื่อกลุ่มทดสอบ (EN)",flex:1.2},{field:"description",headerName:"รายละเอียด",flex:1},{field:"created_at",headerName:"วันที่สร้าง",flex:1},{field:"actions",headerName:"Action",width:200,headerAlign:"center",align:"center",renderCell:t=>e.jsxs(y,{children:[e.jsx(a,{variant:"info",size:"sm",onClick:()=>j(t.row.id),children:e.jsx(N,{})}),e.jsx(a,{variant:"outline-danger",size:"sm",onClick:()=>w(t.row.id),children:e.jsx(v,{})})]})}],x=c.filter(t=>Object.values(t).some(o=>o&&o.toString().toLowerCase().includes(s.toLowerCase())));i.useEffect(()=>{localStorage.setItem("filterText",s)},[s]);const g=()=>{l(""),localStorage.removeItem("filterText")},j=t=>{d("/admin/test-group/edit",{state:{id:t}})},w=t=>{if(window.confirm("คุณต้องการลบข้อมูลกลุ่มทดสอบหรือไม่?"))try{E(t).then(()=>{m()})}catch(r){alert("ลบข้อมูลไม่สำเร็จ:",r)}};return e.jsx("div",{className:"",children:e.jsxs(n,{children:[e.jsx(n.Header,{children:e.jsx("h5",{children:"ข้อมูลกลุ่มทดสอบ"})}),e.jsxs(n.Body,{className:"p-10",children:[e.jsxs(D,{direction:"row",spacing:1,sx:{mb:2},children:[e.jsx(F.Control,{type:"text",placeholder:"Search",value:s,onChange:t=>l(t.target.value)}),e.jsx(a,{variant:"primary",size:"sm",color:"secondary",onClick:g,disabled:!s,children:e.jsx(C,{style:{fontSize:20}})}),e.jsxs(a,{variant:"success",size:"sm",onClick:()=>d("/admin/test-group/add"),children:[e.jsx("i",{className:"feather icon-plus-circle"}),"เพิ่ม"]})]}),e.jsx(k,{rows:x,columns:u,pageSize:5,rowsPerPageOptions:[5,10,20],pagination:!0,disableSelectionOnClick:!0,hideFooterSelectedRowCount:!0})]})]})})};export{K as default};
