import{r as s,E as L,H as k,J as W,i as b,j as R,h as D}from"./index-BFZlI6dJ.js";import{N as M}from"./NoopTransition-DDRdMbSE.js";import{g as p}from"./TransitionWrapper-Dxm_tBl0.js";const N=typeof window<"u"&&window.navigator&&window.navigator.product==="ReactNative",S=typeof document<"u",h=S||N?s.useLayoutEffect:s.useEffect;function U(n){const e=s.useRef(n);return e.current=n,e}function V(n){const e=U(n);s.useEffect(()=>()=>e.current(),[])}const g=(n,e)=>k?n==null?(e||W()).body:(typeof n=="function"&&(n=n()),n&&"current"in n&&(n=n.current),n&&("nodeType"in n||n.getBoundingClientRect)?n:null):null;function q(n,e){const i=L(),[t,r]=s.useState(()=>g(n,i==null?void 0:i.document));if(!t){const o=g(n);o&&r(o)}return s.useEffect(()=>{},[e,t]),s.useEffect(()=>{const o=g(n);o!==t&&r(o)},[n,t]),t}const I=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function P(n,e){if(n==null)return{};var i={};for(var t in n)if({}.hasOwnProperty.call(n,t)){if(e.indexOf(t)>=0)continue;i[t]=n[t]}return i}function F(n){let{onEnter:e,onEntering:i,onEntered:t,onExit:r,onExiting:o,onExited:c,addEndListener:d,children:l}=n,u=P(n,I);const f=s.useRef(null),E=b(f,p(l)),a=x=>m=>{x&&f.current&&x(f.current,m)},j=s.useCallback(a(e),[e]),w=s.useCallback(a(i),[i]),O=s.useCallback(a(t),[t]),v=s.useCallback(a(r),[r]),C=s.useCallback(a(o),[o]),y=s.useCallback(a(c),[c]),T=s.useCallback(a(d),[d]);return Object.assign({},u,{nodeRef:f},e&&{onEnter:j},i&&{onEntering:w},t&&{onEntered:O},r&&{onExit:v},o&&{onExiting:C},c&&{onExited:y},d&&{addEndListener:T},{children:typeof l=="function"?(x,m)=>l(x,Object.assign({},m,{ref:E})):s.cloneElement(l,{ref:E})})}const G=["component"];function _(n,e){if(n==null)return{};var i={};for(var t in n)if({}.hasOwnProperty.call(n,t)){if(e.indexOf(t)>=0)continue;i[t]=n[t]}return i}const $=s.forwardRef((n,e)=>{let{component:i}=n,t=_(n,G);const r=F(t);return R.jsx(i,Object.assign({ref:e},r))});function z({in:n,onTransition:e}){const i=s.useRef(null),t=s.useRef(!0),r=D(e);return h(()=>{if(!i.current)return;let o=!1;return r({in:n,element:i.current,initial:t.current,isStale:()=>o}),()=>{o=!0}},[n,r]),h(()=>(t.current=!1,()=>{t.current=!0}),[]),i}function A({children:n,in:e,onExited:i,onEntered:t,transition:r}){const[o,c]=s.useState(!e);e&&o&&c(!1);const d=z({in:!!e,onTransition:u=>{const f=()=>{u.isStale()||(u.in?t==null||t(u.element,u.initial):(c(!0),i==null||i(u.element)))};Promise.resolve(r(u)).then(f,E=>{throw u.in||c(!0),E})}}),l=b(d,p(n));return o&&!e?null:s.cloneElement(n,{ref:l})}function K(n,e,i){return n?R.jsx($,Object.assign({},i,{component:n})):e?R.jsx(A,Object.assign({},i,{transition:e})):R.jsx(M,Object.assign({},i))}function Q(n,e){return n.classList?!!e&&n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}export{q as a,Q as h,K as r,V as u};
