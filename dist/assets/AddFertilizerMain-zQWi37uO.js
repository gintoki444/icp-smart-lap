import{u as C,r as s,j as e,R as b,C as p,B as u,y as g}from"./index-CMKGjvil.js";import{p as y}from"./fertilizerMainRequest-kGbpd_0A.js";import{C as o}from"./Card-ltuRbL1m.js";import{A as E}from"./Alert-CaEs9ZRl.js";import{F as r}from"./Form-XAT3KesX.js";import"./CloseButton-DXA2z1Sn.js";import"./Transition-CvY6YelV.js";import"./setPrototypeOf-DgZC2w_0.js";const D=()=>{const m=C(),[n,x]=s.useState({fertilizer_main_name_th:"",fertilizer_main_name_en:""}),[a,d]=s.useState({}),[_,c]=s.useState(null),[l,h]=s.useState(!1),j=()=>{const i={};return n.fertilizer_main_name_th.trim()||(i.fertilizer_main_name_th="กรุณากรอกชื่อประเภทปุ๋ย (ภาษาไทย)"),n.fertilizer_main_name_en.trim()||(i.fertilizer_main_name_en="กรุณากรอกชื่อประเภทปุ๋ย (ภาษาอังกฤษ)"),d(i),Object.keys(i).length===0},f=i=>{const{name:t,value:v}=i.target;x({...n,[t]:v}),d({...a,[t]:""})},z=async i=>{if(i.preventDefault(),!!j()){h(!0),c(null);try{if((await y(n)).fertilizer_main_id)g.success("เพิ่มประเภทปุ๋ยสำเร็จ!",{autoClose:3e3}),m("/admin/fertilizer-main");else throw new Error("No fertilizer_main_id returned")}catch(t){c("เกิดข้อผิดพลาดในการเพิ่มประเภทปุ๋ย กรุณาลองใหม่"),console.error("Error adding fertilizer main:",t)}finally{h(!1)}}};return e.jsx("div",{children:e.jsxs(o,{children:[e.jsx(o.Header,{children:e.jsx("h5",{children:"เพิ่มประเภทปุ๋ย"})}),e.jsxs(o.Body,{children:[_&&e.jsx(E,{variant:"danger",children:_}),e.jsxs(r,{onSubmit:z,children:[e.jsxs(b,{children:[e.jsx(p,{md:6,className:"mb-3",children:e.jsxs(r.Group,{controlId:"fertilizer_main_name_th",children:[e.jsx(r.Label,{children:"ชื่อประเภท (ภาษาไทย)"}),e.jsx(r.Control,{type:"text",name:"fertilizer_main_name_th",value:n.fertilizer_main_name_th,placeholder:"กรอกชื่อประเภท (ภาษาไทย)",onChange:f,isInvalid:!!a.fertilizer_main_name_th}),e.jsx(r.Control.Feedback,{type:"invalid",children:a.fertilizer_main_name_th})]})}),e.jsx(p,{md:6,className:"mb-3",children:e.jsxs(r.Group,{controlId:"fertilizer_main_name_en",children:[e.jsx(r.Label,{children:"ชื่อประเภท (ภาษาอังกฤษ)"}),e.jsx(r.Control,{type:"text",name:"fertilizer_main_name_en",value:n.fertilizer_main_name_en,placeholder:"กรอกชื่อประเภท (ภาษาอังกฤษ)",onChange:f,isInvalid:!!a.fertilizer_main_name_en}),e.jsx(r.Control.Feedback,{type:"invalid",children:a.fertilizer_main_name_en})]})})]}),e.jsx(u,{variant:"primary",type:"submit",disabled:l,children:l?"กำลังบันทึก...":"บันทึก"}),e.jsx(u,{variant:"danger",className:"ms-2",onClick:()=>m("/admin/fertilizer-main"),disabled:l,children:"กลับ"})]})]})]})})};export{D as default};
