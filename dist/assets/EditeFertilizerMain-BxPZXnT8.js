import{u as C,a as E,r as t,j as e,R as F,C as p,B as j,y as S}from"./index-CMKGjvil.js";import{a as I,b as k}from"./fertilizerMainRequest-kGbpd_0A.js";import{C as c}from"./Card-ltuRbL1m.js";import{A as w}from"./Alert-CaEs9ZRl.js";import{F as i}from"./Form-XAT3KesX.js";import"./CloseButton-DXA2z1Sn.js";import"./Transition-CvY6YelV.js";import"./setPrototypeOf-DgZC2w_0.js";const O=()=>{var x;const m=C(),s=((x=E().state)==null?void 0:x.id)||null,[n,d]=t.useState({fertilizer_main_name_th:"",fertilizer_main_name_en:""}),[a,f]=t.useState({}),[h,o]=t.useState(null),[_,u]=t.useState(!1);t.useEffect(()=>{s?v():m("/admin/fertilizer-main")},[s]);const v=async()=>{try{const r=await I(s);d({fertilizer_main_name_th:r.fertilizer_main_name_th||"",fertilizer_main_name_en:r.fertilizer_main_name_en||""})}catch(r){o("เกิดข้อผิดพลาดในการดึงข้อมูลประเภทปุ๋ย"),console.error("Error fetching fertilizer main:",r)}},y=()=>{const r={};return n.fertilizer_main_name_th.trim()||(r.fertilizer_main_name_th="กรุณากรอกชื่อประเภทปุ๋ย (ภาษาไทย)"),n.fertilizer_main_name_en.trim()||(r.fertilizer_main_name_en="กรุณากรอกชื่อประเภทปุ๋ย (ภาษาอังกฤษ)"),f(r),Object.keys(r).length===0},z=r=>{const{name:l,value:b}=r.target;d({...n,[l]:b}),f({...a,[l]:""})},g=async r=>{if(r.preventDefault(),!!y()){u(!0),o(null);try{await k(s,n),S.success("แก้ไขประเภทปุ๋ยสำเร็จ!",{autoClose:3e3}),m("/admin/fertilizer-main")}catch(l){o("เกิดข้อผิดพลาดในการแก้ไขประเภทปุ๋ย กรุณาลองใหม่"),console.error("Error updating fertilizer main:",l)}finally{u(!1)}}};return e.jsx("div",{children:e.jsxs(c,{children:[e.jsx(c.Header,{children:e.jsx("h5",{children:"แก้ไขประเภทปุ๋ย"})}),e.jsxs(c.Body,{children:[h&&e.jsx(w,{variant:"danger",children:h}),e.jsxs(i,{onSubmit:g,children:[e.jsxs(F,{children:[e.jsx(p,{md:6,className:"mb-3",children:e.jsxs(i.Group,{controlId:"fertilizer_main_name_th",children:[e.jsx(i.Label,{children:"ชื่อประเภท (ภาษาไทย)"}),e.jsx(i.Control,{type:"text",name:"fertilizer_main_name_th",value:n.fertilizer_main_name_th,onChange:z,isInvalid:!!a.fertilizer_main_name_th}),e.jsx(i.Control.Feedback,{type:"invalid",children:a.fertilizer_main_name_th})]})}),e.jsx(p,{md:6,className:"mb-3",children:e.jsxs(i.Group,{controlId:"fertilizer_main_name_en",children:[e.jsx(i.Label,{children:"ชื่อประเภท (ภาษาอังกฤษ)"}),e.jsx(i.Control,{type:"text",name:"fertilizer_main_name_en",value:n.fertilizer_main_name_en,onChange:z,isInvalid:!!a.fertilizer_main_name_en}),e.jsx(i.Control.Feedback,{type:"invalid",children:a.fertilizer_main_name_en})]})})]}),e.jsx(j,{variant:"primary",type:"submit",disabled:_,children:_?"กำลังบันทึก...":"บันทึก"}),e.jsx(j,{variant:"danger",className:"ms-2",onClick:()=>m("/admin/fertilizer-main"),disabled:_,children:"กลับ"})]})]})]})})};export{O as default};
