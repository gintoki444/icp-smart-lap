import{u as E,a as F,r as s,j as e,R as G,C as m,B as f}from"./index-6YeC_AS5.js";import{a as I,b as S}from"./testGroupRequest-74lX6Leo.js";import{C as u}from"./Card-BhOVTKNa.js";import{A as k}from"./Alert-D32VqIXN.js";import{F as t}from"./Form-CGCyrcfL.js";import"./CloseButton-BYF_v0Zl.js";import"./Transition-rt6HDaS9.js";import"./setPrototypeOf-DgZC2w_0.js";const O=()=>{var j;const l=E(),a=((j=F().state)==null?void 0:j.id)||null,[n,h]=s.useState({group_name_th:"",group_name_en:"",description:""}),[o,g]=s.useState({}),[_,c]=s.useState(null),[d,x]=s.useState(!1);s.useEffect(()=>{a?v():l("/admin/test-groups")},[a]);const v=async()=>{try{const r=await I(a);h({group_name_th:r.group_name_th||"",group_name_en:r.group_name_en||"",description:r.description||""})}catch(r){c("เกิดข้อผิดพลาดในการดึงข้อมูลกลุ่มทดสอบ"),console.error("Error fetching test group:",r)}},C=()=>{const r={};return n.group_name_th.trim()||(r.group_name_th="กรุณากรอกชื่อกลุ่มทดสอบ (ภาษาไทย)"),n.group_name_en.trim()||(r.group_name_en="กรุณากรอกชื่อกลุ่มทดสอบ (ภาษาอังกฤษ)"),n.description.trim()||(r.description="กรุณากรอกคำอธิบาย"),g(r),Object.keys(r).length===0},p=r=>{const{name:i,value:y}=r.target;h({...n,[i]:y}),g({...o,[i]:""})},b=async r=>{if(r.preventDefault(),!!C()){x(!0),c(null);try{await S(a,n),toast.success("แก้ไขกลุ่มทดสอบสำเร็จ!!",{autoClose:3e3}),l("/admin/test-group")}catch(i){toast.error("เกิดข้อผิดพลาดในการแก้ไขกลุ่มทดสอบ!!",{autoClose:3e3}),c("เกิดข้อผิดพลาดในการแก้ไขกลุ่มทดสอบ กรุณาลองใหม่"),console.error("Error updating test group:",i)}finally{x(!1)}}};return e.jsx("div",{children:e.jsxs(u,{children:[e.jsx(u.Header,{children:e.jsx("h5",{children:"แก้ไขกลุ่มทดสอบ"})}),e.jsxs(u.Body,{children:[_&&e.jsx(k,{variant:"danger",children:_}),e.jsxs(t,{onSubmit:b,children:[e.jsxs(G,{children:[e.jsx(m,{md:6,className:"mb-3",children:e.jsxs(t.Group,{controlId:"group_name_th",children:[e.jsx(t.Label,{children:"ชื่อกลุ่มทดสอบ (ภาษาไทย)"}),e.jsx(t.Control,{type:"text",name:"group_name_th",value:n.group_name_th,placeholder:"กรอกชื่อกลุ่มทดสอบ (ภาษาไทย)",onChange:p,isInvalid:!!o.group_name_th}),e.jsx(t.Control.Feedback,{type:"invalid",children:o.group_name_th})]})}),e.jsx(m,{md:6,className:"mb-3",children:e.jsxs(t.Group,{controlId:"group_name_en",children:[e.jsx(t.Label,{children:"ชื่อกลุ่มทดสอบ (ภาษาอังกฤษ)"}),e.jsx(t.Control,{type:"text",name:"group_name_en",value:n.group_name_en,placeholder:"กรอกชื่อกลุ่มทดสอบ (ภาษาอังกฤษ)",onChange:p,isInvalid:!!o.group_name_en}),e.jsx(t.Control.Feedback,{type:"invalid",children:o.group_name_en})]})}),e.jsx(m,{md:12,className:"mb-3",children:e.jsxs(t.Group,{controlId:"description",children:[e.jsx(t.Label,{children:"คำอธิบาย"}),e.jsx(t.Control,{as:"textarea",rows:3,name:"description",value:n.description,placeholder:"กรอกคำอธิบาย",onChange:p,isInvalid:!!o.description}),e.jsx(t.Control.Feedback,{type:"invalid",children:o.description})]})})]}),e.jsx(f,{variant:"primary",type:"submit",disabled:d,children:d?"กำลังบันทึก...":"บันทึก"}),e.jsx(f,{variant:"danger",className:"ms-2",onClick:()=>l("/admin/test-group"),disabled:d,children:"กลับ"})]})]})]})})};export{O as default};
