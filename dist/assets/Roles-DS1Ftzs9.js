import{r,u as v,j as e,C as n,a as y,B as i,F as N}from"./index-BFZlI6dJ.js";import{g as E,d as _}from"./rolesRequest-BlVghC4s.js";import{S as F,I as k,D as B,R as L}from"./index-Dq98LQ6f.js";import{F as I}from"./Form-FiLb8d9P.js";import{B as T}from"./ButtonGroup-hJfKEDo9.js";import"./emotion-react.browser.esm-CmYPGmvE.js";import"./Transition-BAn3rOC0.js";import"./ElementChildren-CPU8LvB5.js";import"./Col-CY34EU4-.js";const J=()=>{const[f,h]=r.useState([]),[o,l]=r.useState(()=>localStorage.getItem("filterText")||""),[d,x]=r.useState(f),[p,c]=r.useState(!0),m=v();r.useEffect(()=>{u()},[]),r.useEffect(()=>{},[d]);const u=()=>{c(!0),E().then(t=>{if(t){const s=t.map((a,C)=>({id:a.role_id,no:C+1,role_name:a.role_name,description:a.description,created_at:a.created_at,updated_at:a.updated_at}));h(s),x(s)}c(!1)})},g=[{field:"no",headerName:"No.",width:90,headerAlign:"center",align:"center"},{field:"role_name",headerName:"Role",flex:1},{field:"description",headerName:"รายละเอียด",flex:1},{field:"actions",headerName:"การจัดการ",width:200,headerAlign:"center",align:"center",renderCell:t=>e.jsxs(T,{children:[e.jsx(i,{variant:"info",size:"sm",onClick:()=>R(t.row),children:e.jsx(N,{})}),e.jsx(i,{variant:"outline-danger",size:"sm",onClick:()=>S(t.row.id),children:e.jsx(L,{})})]})}],j=d.filter(t=>Object.values(t).some(s=>s&&s.toString().toLowerCase().includes(o.toLowerCase())));r.useEffect(()=>{localStorage.setItem("filterText",o)},[o]);const w=()=>{l(""),localStorage.removeItem("filterText")},R=t=>{m("/admin/roles-list/edit",{state:{roles:t}})},S=async t=>{if(window.confirm("Are you sure you want to delete this device?"))try{await _(t),u()}catch(s){console.error("Error deleting device:",s)}};return e.jsx("div",{className:"",children:e.jsxs(n,{children:[e.jsx(n.Header,{children:e.jsx("h5",{children:"ข้อมูลรายการ Role"})}),e.jsxs(n.Body,{className:"p-10",children:[p&&e.jsx(y,{}),e.jsxs(F,{direction:"row",spacing:1,sx:{mb:2},children:[e.jsx(I.Control,{type:"text",placeholder:"Search",value:o,onChange:t=>l(t.target.value)}),e.jsx(i,{variant:"primary",color:"secondary",onClick:w,disabled:!o,children:e.jsx(k,{style:{fontSize:20}})}),e.jsxs(i,{variant:"success",onClick:()=>m("/admin/roles-list/add"),children:[e.jsx("i",{className:"feather icon-plus-circle"}),"เพิ่ม"]})]}),e.jsx(B,{rows:j,columns:g,pageSize:5,rowsPerPageOptions:[5,10,20],pagination:!0,disableSelectionOnClick:!0,hideFooterSelectedRowCount:!0})]})]})})};export{J as default};
