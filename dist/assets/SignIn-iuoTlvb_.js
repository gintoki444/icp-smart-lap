import{u as j,r as g,j as s,B as f,R as N,C as n,l as b,N as l}from"./index-BHSqYlV9.js";import{F as v,c as w,a as c}from"./formik.esm-DpCaO4v_.js";import{s as S}from"./authentication-Bvihi38F.js";import{C as d}from"./Col-Ck7c_TKm.js";import{A as k}from"./Alert-Co4SGDd-.js";import{R}from"./Row-4QVMY7bz.js";import"./Fade-D8pK46Uf.js";import"./Transition-tUz9ycqu.js";import"./TransitionWrapper-CjfbmhfF.js";import"./CloseButton-C3Us5ihO.js";const y=()=>{const r=j();g.useEffect(()=>{const a=localStorage.getItem("authToken"),t=localStorage.getItem("userRole");a&&(t==="admin"?r("/admin/dashboard"):t==="user"&&r("/user/dashboard"))},[r]);const u={email:"",password:"",submit:null},x=()=>w().shape({email:c().email("Must be a valid email").max(255).required("Email is required"),password:c().max(255).required("Password is required")}),p=async(a,{setErrors:t,setSubmitting:i})=>{const e=await S(a);e.token?(localStorage.setItem("authToken",e.token),localStorage.setItem("userRole",e.user.role),e.user.role==="admin"?r("/admin/"):e.user.role==="user"&&r("/user/")):t({submit:e.message}),i(!1)};return s.jsx(v,{initialValues:u,validationSchema:x,onSubmit:p,children:({errors:a,handleBlur:t,handleChange:i,handleSubmit:e,isSubmitting:h,touched:m,values:o})=>s.jsxs("form",{noValidate:!0,onSubmit:e,children:[s.jsxs("div",{className:"form-group mb-3 text-start",children:[s.jsx("input",{className:"form-control",placeholder:"Email Address / Username",name:"email",onBlur:t,onChange:i,type:"email",value:o.email}),m.email&&a.email&&s.jsx("small",{className:"text-danger form-text",children:a.email})]}),s.jsxs("div",{className:"form-group mb-4 text-start",children:[s.jsx("input",{className:"form-control",placeholder:"Password",name:"password",onBlur:t,onChange:i,type:"password",value:o.password}),m.password&&a.password&&s.jsx("small",{className:"text-danger form-text",children:a.password})]}),a.submit&&s.jsx(d,{sm:12,children:s.jsx(k,{variant:"danger",children:a.submit})}),s.jsx(R,{children:s.jsx(d,{mt:2,children:s.jsx(f,{className:"btn-block mb-4",color:"primary",disabled:h,size:"large",type:"submit",variant:"primary",children:"Signin"})})})]})})},P=()=>s.jsx(N.Fragment,{children:s.jsx("div",{className:"auth-wrapper",children:s.jsxs("div",{className:"auth-content",children:[s.jsxs("div",{className:"auth-bg",children:[s.jsx("span",{className:"r"}),s.jsx("span",{className:"r s"}),s.jsx("span",{className:"r s"}),s.jsx("span",{className:"r"})]}),s.jsx(n,{className:"borderless text-center",children:s.jsxs(n.Body,{children:[s.jsx("div",{className:"mb-0",children:s.jsx("img",{className:"img-fluid",src:b,alt:"logo",width:120})}),s.jsx(y,{}),s.jsxs("p",{className:"mb-1 text-muted",children:["Forgot password?"," ",s.jsx(l,{to:"/auth/reset-password#",className:"f-w-400",children:"Reset"})]}),s.jsxs("p",{className:"mb-1 text-muted",children:["Activate E-mal?"," ",s.jsx(l,{to:"/auth/activate-token",className:"f-w-400",children:"activate"})]}),s.jsxs("p",{className:"mb-1 text-muted",children:["Donâ€™t have an account?"," ",s.jsx(l,{to:"/auth/signup-1",className:"f-w-400",children:"Signup"})]})]})})]})})});export{P as default};
