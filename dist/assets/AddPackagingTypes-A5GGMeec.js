import{u as k,r as s,j as e,R as f,C as v,B as m,y as b}from"./index-CMKGjvil.js";import{p as C}from"./packageingTypeRequest-CUTcv2jf.js";import{C as c}from"./Card-ltuRbL1m.js";import{A as E}from"./Alert-CaEs9ZRl.js";import{F as n}from"./Form-XAT3KesX.js";import"./CloseButton-DXA2z1Sn.js";import"./Transition-CvY6YelV.js";import"./setPrototypeOf-DgZC2w_0.js";const I=()=>{const p=k(),[t,u]=s.useState({packaging_type_name:""}),[i,y]=s.useState({}),[l,d]=s.useState(null),[o,g]=s.useState(!1),h=()=>{const a={};return t.packaging_type_name.trim()||(a.packaging_type_name="กรุณากรอกชื่อภาชนะบรรจุ"),Object.keys(a).length===0},x=a=>{const{name:r,value:j}=a.target;u({...t,[r]:j}),y({...i,[r]:""})},_=async a=>{if(a.preventDefault(),!!h()){g(!0),d(null);try{if((await C(t)).packaging_type_id)b.success("เพิ่มภาชนะบรรจุสำเร็จ!",{autoClose:3e3}),p("/admin/packaging-types");else throw new Error("No packaging_type_id returned")}catch(r){d("เกิดข้อผิดพลาดในการเพิ่มภาชนะบรรจุ กรุณาลองใหม่"),console.error("Error adding base packaging:",r)}finally{g(!1)}}};return e.jsx("div",{children:e.jsxs(c,{children:[e.jsx(c.Header,{children:e.jsx("h5",{children:"เพิ่มภาชนะบรรจุ"})}),e.jsxs(c.Body,{children:[l&&e.jsx(E,{variant:"danger",children:l}),e.jsxs(n,{onSubmit:_,children:[e.jsx(f,{children:e.jsx(v,{md:6,className:"mb-3",children:e.jsxs(n.Group,{controlId:"packaging_type_name",children:[e.jsx(n.Label,{children:"ชื่อชื่อภาชนะบรรจุ"}),e.jsx(n.Control,{type:"text",name:"packaging_type_name",value:t.packaging_type_name,placeholder:"กรอกชื่อภาชนะบรรจุ",onChange:x,isInvalid:!!i.packaging_type_name}),e.jsx(n.Control.Feedback,{type:"invalid",children:i.packaging_type_name})]})})}),e.jsx(m,{variant:"primary",type:"submit",disabled:o,children:o?"กำลังบันทึก...":"บันทึก"}),e.jsx(m,{variant:"danger",className:"ms-2",onClick:()=>p("/admin/packaging-types"),disabled:o,children:"กลับ"})]})]})]})})};export{I as default};
