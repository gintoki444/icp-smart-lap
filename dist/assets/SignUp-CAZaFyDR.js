import{u as y,r as d,j as s,b as g,R as C,C as p,l as S,F as e,I as x,a as h,B as _,N as P,S as k}from"./index-DZpC_pHZ.js";import{F,c as I,a as l,b as q}from"./formik.esm-DH0jrOO4.js";import{C as u}from"./Card-ZCMDsCmS.js";import{A as G}from"./Alert-Dwi6VePK.js";import"./CloseButton-DgEPtGiG.js";import"./Transition-DW97tWQD.js";const E=()=>{const j=y(),[r,f]=d.useState(!1),[m,w]=d.useState(!1),b={username:"",first_name:"",last_name:"",email:"",phone:"",role:"user",password:"",confirmPassword:""},N=()=>I({first_name:l().min(3,"ชื่อต้องมีอย่างน้อย 3 ตัวอักษร").required("กรุณากรอกชื่อ"),last_name:l().min(3,"นามสกุลต้องมีอย่างน้อย 3 ตัวอักษร").required("กรุณากรอกนามสกุล"),email:l().email("รูปแบบอีเมล์ไม่ถูกต้อง").required("กรุณากรอกอีเมล์"),phone:l().matches(/^[0-9]{10}$/,"กรุณากรอกเบอร์โทรศัพท์ให้ถูกต้อง (10 หลัก)").required("กรุณากรอกเบอร์โทรศัพท์"),password:l().min(8,"รหัสผ่านต้องมีอย่างน้อย 8 ตัวอักษร").matches(/[0-9]/,"รหัสผ่านต้องมีตัวเลขอย่างน้อย 1 ตัว").matches(/[A-Z]/,"รหัสผ่านต้องมีตัวอักษรพิมพ์ใหญ่อย่างน้อย 1 ตัว").matches(/[^A-Za-z0-9]/,"รหัสผ่านต้องมีอักขระพิเศษอย่างน้อย 1 ตัว").required("กรุณากรอกรหัสผ่าน"),confirmPassword:l().oneOf([q("password"),null],"รหัสผ่านไม่ตรงกัน").required("กรุณายืนยันรหัสผ่าน")}),v=async(t,{setErrors:i,setStatus:c,setSubmitting:n})=>{try{t.username=t.email,(await k(t)).userId?(alert("สมัครสมาชิกสำเร็จ กรุณาตรวจสอบอีเมล์เพื่อยืนยันตัวตน"),j("/auth/activate-token")):i({submit:err.message})}catch(a){console.error(a),c({success:!1}),i({submit:a.message}),n(!1)}};return s.jsx(g.Fragment,{children:s.jsx("div",{className:"auth-wrapper",children:s.jsxs("div",{className:"auth-content",children:[s.jsxs("div",{className:"auth-bg",children:[s.jsx("span",{className:"r"}),s.jsx("span",{className:"r s"}),s.jsx("span",{className:"r s"}),s.jsx("span",{className:"r"})]}),s.jsx(u,{className:"borderless",children:s.jsx(C,{className:"align-items-center",children:s.jsx(p,{children:s.jsxs(u.Body,{className:"text-center",children:[s.jsx("div",{className:"mb-4",children:s.jsx("img",{className:"img-fluid",src:S,alt:"logo",width:120})}),s.jsx("h3",{className:"mb-4",children:"Sign up"}),s.jsx(F,{initialValues:b,validationSchema:N,onSubmit:v,children:({handleChange:t,handleBlur:i,handleSubmit:c,values:n,errors:a,touched:o})=>s.jsxs(e,{onSubmit:c,children:[s.jsxs(e.Group,{className:"mb-3 text-start",children:[s.jsx(e.Control,{type:"text",placeholder:"ชื่อ",name:"first_name",value:n.first_name,onChange:t,onBlur:i,isInvalid:!!a.first_name&&o.first_name}),s.jsx(e.Control.Feedback,{type:"invalid",children:a.first_name})]}),s.jsxs(e.Group,{className:"mb-3 text-start",children:[s.jsx(e.Control,{type:"text",placeholder:"นามสกุล",name:"last_name",value:n.last_name,onChange:t,onBlur:i,isInvalid:!!a.last_name&&o.last_name}),s.jsx(e.Control.Feedback,{type:"invalid",children:a.last_name})]}),s.jsxs(e.Group,{className:"mb-3 text-start",children:[s.jsx(e.Control,{type:"email",placeholder:"อีเมล์",name:"email",value:n.email,onChange:t,onBlur:i,isInvalid:!!a.email&&o.email}),s.jsx(e.Control.Feedback,{type:"invalid",children:a.email})]}),s.jsxs(e.Group,{className:"mb-3 text-start",children:[s.jsx(e.Control,{type:"text",placeholder:"เบอร์โทรศัพท์",name:"phone",value:n.phone,onChange:t,onBlur:i,isInvalid:!!a.phone&&o.phone}),s.jsx(e.Control.Feedback,{type:"invalid",children:a.phone})]}),s.jsxs(e.Group,{className:"mb-3 text-start position-relative",children:[s.jsx(e.Control,{type:r?"text":"password",placeholder:"รหัสผ่าน",name:"password",value:n.password,onChange:t,onBlur:i,isInvalid:!!a.password&&o.password}),s.jsx("span",{className:"position-absolute",style:{right:a.password?30:"10px",top:a.password?"30%":"50%",transform:"translateY(-50%)",cursor:"pointer"},onClick:()=>f(!r),children:r?s.jsx(x,{size:20}):s.jsx(h,{size:20})}),s.jsx(e.Control.Feedback,{type:"invalid",children:a.password})]}),s.jsxs(e.Group,{className:"mb-3 text-start position-relative",children:[s.jsx(e.Control,{type:m?"text":"password",placeholder:"ยืนยันรหัสผ่าน",name:"confirmPassword",value:n.confirmPassword,onChange:t,onBlur:i,isInvalid:!!a.confirmPassword&&o.confirmPassword}),s.jsx("span",{className:"position-absolute",style:{right:a.confirmPassword?30:"10px",top:a.confirmPassword?"30%":"50%",transform:"translateY(-50%)",cursor:"pointer"},onClick:()=>w(!m),children:m?s.jsx(x,{size:20}):s.jsx(h,{size:20})}),s.jsx(e.Control.Feedback,{type:"invalid",children:a.confirmPassword})]}),a.submit&&s.jsx(p,{sm:12,children:s.jsx(G,{variant:"danger",children:a.submit})}),s.jsx(_,{type:"submit",variant:"primary",className:"mb-4",children:"Sign up"}),s.jsxs("p",{className:"mb-1 text-muted",children:["Already have an account?"," ",s.jsx(P,{to:"/auth/signin",className:"f-w-400",children:"Login"})]})]})})]})})})})]})})})};export{E as default};
