import{u as z,r as a,j as e,R as v,C as g,B as f,y as b}from"./index-CMKGjvil.js";import{p as C}from"./fertilizerTypesRequest-CzftO6V-.js";import{C as l}from"./Card-ltuRbL1m.js";import{A as E}from"./Alert-CaEs9ZRl.js";import{F as i}from"./Form-XAT3KesX.js";import"./CloseButton-DXA2z1Sn.js";import"./Transition-CvY6YelV.js";import"./setPrototypeOf-DgZC2w_0.js";const R=()=>{const d=z(),[s,u]=a.useState({fertilizer_type_name:""}),[n,y]=a.useState({}),[c,m]=a.useState(null),[o,p]=a.useState(!1),h=()=>{const r={};return s.fertilizer_type_name.trim()||(r.fertilizer_type_name="กรุณากรอกชื่อลักษณะปุ๋ย"),Object.keys(r).length===0},x=r=>{const{name:t,value:j}=r.target;u({...s,[t]:j}),y({...n,[t]:""})},_=async r=>{if(r.preventDefault(),!!h()){p(!0),m(null);try{if((await C(s)).fertilizer_type_id)b.success("เพิ่มลักษณะปุ๋ยสำเร็จ!",{autoClose:3e3}),d("/admin/fertilizer-types");else throw new Error("No fertilizer_type_id returned")}catch(t){m("เกิดข้อผิดพลาดในการเพิ่มลักษณะปุ๋ย กรุณาลองใหม่"),console.error("Error adding base fertilizer:",t)}finally{p(!1)}}};return e.jsx("div",{children:e.jsxs(l,{children:[e.jsx(l.Header,{children:e.jsx("h5",{children:"เพิ่มลักษณะปุ๋ย"})}),e.jsxs(l.Body,{children:[c&&e.jsx(E,{variant:"danger",children:c}),e.jsxs(i,{onSubmit:_,children:[e.jsx(v,{children:e.jsx(g,{md:6,className:"mb-3",children:e.jsxs(i.Group,{controlId:"fertilizer_type_name",children:[e.jsx(i.Label,{children:"ชื่อลักษณะปุ๋ย"}),e.jsx(i.Control,{type:"text",name:"fertilizer_type_name",value:s.fertilizer_type_name,placeholder:"กรอกลักษณะปุ๋ย",onChange:x,isInvalid:!!n.fertilizer_type_name}),e.jsx(i.Control.Feedback,{type:"invalid",children:n.fertilizer_type_name})]})})}),e.jsx(f,{variant:"primary",type:"submit",disabled:o,children:o?"กำลังบันทึก...":"บันทึก"}),e.jsx(f,{variant:"danger",className:"ms-2",onClick:()=>d("/admin/fertilizer-types"),disabled:o,children:"กลับ"})]})]})]})})};export{R as default};
