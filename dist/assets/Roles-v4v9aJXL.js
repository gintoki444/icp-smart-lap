import{r,u as v,j as e,v as y,B as a,i as N,F as E,w as _}from"./index-6YeC_AS5.js";import{g as F,d as k}from"./rolesRequest-Bh-L4AxF.js";import{C as n}from"./Card-BhOVTKNa.js";import{S as B}from"./Stack-DS5MSRky.js";import{F as L}from"./Form-CGCyrcfL.js";import{D as A,B as T}from"./DataGrid-DoczE-38.js";import"./DefaultPropsProvider-2RhE6zQB.js";import"./emotion-element-f0de968e.browser.esm-C-W82wov.js";import"./TextField-DmQ6Lsg1.js";import"./toPropertyKey-CTo9CRTC.js";import"./Transition-rt6HDaS9.js";import"./setPrototypeOf-DgZC2w_0.js";import"./Divider-mvYdwXE_.js";const U=()=>{const[p,u]=r.useState([]),[s,l]=r.useState(()=>localStorage.getItem("filterText")||""),[c,h]=r.useState(p),[x,d]=r.useState(!0),m=v();r.useEffect(()=>{f()},[]),r.useEffect(()=>{},[c]);const f=()=>{d(!0),F().then(t=>{if(t){const o=t.map((i,R)=>({id:i.role_id,no:R+1,role_name:i.role_name,description:i.description,created_at:i.created_at,updated_at:i.updated_at}));u(o),h(o)}d(!1)})},g=[{field:"no",headerName:"No.",width:90,headerAlign:"center",align:"center"},{field:"role_name",headerName:"Role",flex:1},{field:"description",headerName:"รายละเอียด",flex:1},{field:"actions",headerName:"Action",width:200,headerAlign:"center",align:"center",renderCell:t=>e.jsxs(T,{children:[e.jsx(a,{variant:"info",size:"sm",onClick:()=>S(t.row),children:e.jsx(E,{})}),e.jsx(a,{variant:"outline-danger",size:"sm",onClick:()=>C(t.row.id),children:e.jsx(_,{})})]})}],j=c.filter(t=>Object.values(t).some(o=>o&&o.toString().toLowerCase().includes(s.toLowerCase())));r.useEffect(()=>{localStorage.setItem("filterText",s)},[s]);const w=()=>{l(""),localStorage.removeItem("filterText")},S=t=>{m("/admin/roles-list/edit",{state:{roles:t}})},C=async t=>{if(window.confirm("Are you sure you want to delete this device?"))try{await k(t),f()}catch(o){console.error("Error deleting device:",o)}};return e.jsx("div",{className:"",children:e.jsxs(n,{children:[e.jsx(n.Header,{children:e.jsx("h5",{children:"ข้อมูลรายการ Role"})}),e.jsxs(n.Body,{className:"p-10",children:[x&&e.jsx(y,{}),e.jsxs(B,{direction:"row",spacing:1,sx:{mb:2},children:[e.jsx(L.Control,{type:"text",placeholder:"Search",value:s,onChange:t=>l(t.target.value)}),e.jsx(a,{variant:"primary",color:"secondary",onClick:w,disabled:!s,children:e.jsx(N,{style:{fontSize:20}})}),e.jsxs(a,{variant:"success",onClick:()=>m("/admin/roles-list/add"),children:[e.jsx("i",{className:"feather icon-plus-circle"}),"เพิ่ม"]})]}),e.jsx(A,{rows:j,columns:g,pageSize:5,rowsPerPageOptions:[5,10,20],pagination:!0,disableSelectionOnClick:!0,hideFooterSelectedRowCount:!0})]})]})})};export{U as default};
