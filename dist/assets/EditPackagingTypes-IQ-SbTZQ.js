import{u as v,a as C,r as t,j as a,R as E,C as S,B as h,y as F}from"./index-Bq0BSIrC.js";import{a as w,b as B}from"./packageingTypeRequest-CUTcv2jf.js";import{C as g}from"./Card-C7kDYjR9.js";import{A as D}from"./Alert-C8ltoKJ3.js";import{F as n}from"./Form-C1nYDdO8.js";import"./CloseButton-DJdHSP0V.js";import"./Transition-DABJrq3x.js";import"./setPrototypeOf-DgZC2w_0.js";const H=()=>{var u;const o=v(),r=((u=C().state)==null?void 0:u.id)||null,[s,d]=t.useState({packaging_type_name:""}),[c,k]=t.useState({}),[m,l]=t.useState(null),[p,y]=t.useState(!1);t.useEffect(()=>{r?x():o("/admin/packaging-types")},[r]);const x=async()=>{try{const e=await w(r);d({packaging_type_name:e.packaging_type_name||""})}catch(e){l("เกิดข้อผิดพลาดในการดึงข้อมูลปุ๋ยพื้นฐาน"),console.error("Error fetching base fertilizer:",e)}},_=()=>{const e={};return s.packaging_type_name.trim()||(e.packaging_type_name="กรุณากรอกชื่อภาชนะบรรจุ"),Object.keys(e).length===0},f=e=>{const{name:i,value:b}=e.target;d({...s,[i]:b}),k({...c,[i]:""})},j=async e=>{if(e.preventDefault(),!!_()){y(!0),l(null);try{await B(s,r),F.success("แก้ไขภาชนะบรรจุสำเร็จ!",{autoClose:3e3}),o("/admin/packaging-types")}catch(i){l("เกิดข้อผิดพลาดในการแก้ไขภาชนะบรรจุ กรุณาลองใหม่"),console.error("Error adding base packaging:",i)}finally{y(!1)}}};return a.jsx("div",{children:a.jsxs(g,{children:[a.jsx(g.Header,{children:a.jsx("h5",{children:"แก้ไขภาชนะบรรจุ"})}),a.jsxs(g.Body,{children:[m&&a.jsx(D,{variant:"danger",children:m}),a.jsxs(n,{onSubmit:j,children:[a.jsx(E,{children:a.jsx(S,{md:6,className:"mb-3",children:a.jsxs(n.Group,{controlId:"packaging_type_name",children:[a.jsx(n.Label,{children:"ชื่อชื่อภาชนะบรรจุ"}),a.jsx(n.Control,{type:"text",name:"packaging_type_name",value:s.packaging_type_name,placeholder:"กรอกชื่อภาชนะบรรจุ",onChange:f,isInvalid:!!c.packaging_type_name}),a.jsx(n.Control.Feedback,{type:"invalid",children:c.packaging_type_name})]})})}),a.jsx(h,{variant:"primary",type:"submit",disabled:p,children:p?"กำลังบันทึก...":"บันทึก"}),a.jsx(h,{variant:"danger",className:"ms-2",onClick:()=>o("/admin/packaging-types"),disabled:p,children:"กลับ"})]})]})]})})};export{H as default};
