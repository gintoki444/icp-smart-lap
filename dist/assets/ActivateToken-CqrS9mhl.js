import{u as p,a as k,r as i,j as e,c as v,R as N,l as b,C as f,B as g,N as m,e as y}from"./index-CMKGjvil.js";import{u as w,c as C,a as E}from"./formik.esm-PXS3-tw9.js";import{C as d}from"./Card-ltuRbL1m.js";import{F as n}from"./Form-XAT3KesX.js";import{A as S}from"./Alert-CaEs9ZRl.js";import"./CloseButton-DXA2z1Sn.js";import"./Transition-CvY6YelV.js";import"./setPrototypeOf-DgZC2w_0.js";const $=()=>{const u=p(),h=k(),[c,l]=i.useState(null),r=new URLSearchParams(h.search).get("token")||"",s=w({initialValues:{token:r,submit:null},validationSchema:C({token:E().length(4,"Token ต้องมี 4 ตัวอักษร").required("กรุณากรอก Token")}),onSubmit:async(x,{setErrors:j,setSubmitting:o})=>{o(!0),l(null);try{(await y(x.token)).message==="Account activated successfully. You can now log in."&&u("/auth/activate-success")}catch(t){let a="เกิดข้อผิดพลาดในการยืนยันอีเมล์";t.message.includes("400")?a="Token ไม่ถูกต้อง กรุณาตรวจสอบอีกครั้ง":t.message.includes("404")?a="ไม่พบ Token นี้ กรุณาขอ Token ใหม่":t.message.includes("500")&&(a="เกิดข้อผิดพลาดในระบบ กรุณาลองใหม่ภายหลัง"),j({submit:a}),l(a)}finally{o(!1)}}});return i.useEffect(()=>{r&&s.handleSubmit()},[r]),e.jsx(v.Fragment,{children:e.jsx("div",{className:"auth-wrapper",children:e.jsxs("div",{className:"auth-content text-center",children:[e.jsxs("div",{className:"auth-bg",children:[e.jsx("span",{className:"r"}),e.jsx("span",{className:"r s"}),e.jsx("span",{className:"r s"}),e.jsx("span",{className:"r"})]}),e.jsx(d,{className:"borderless text-center",children:e.jsx(d.Body,{children:e.jsxs(N,{className:"justify-content-center",children:[e.jsx("div",{className:"mb-0",children:e.jsx("img",{className:"img-fluid",src:b,alt:"logo",width:120})}),e.jsxs(f,{md:12,children:[e.jsx("h3",{className:"mb-4",children:"Activate E-mail"}),e.jsxs("p",{className:"mb-4",children:["กรอก Token ที่ได้รับจาก ",e.jsx("br",{}),"อีเมล์เพื่อยืนยันตัวตน"]}),e.jsxs(n,{onSubmit:s.handleSubmit,children:[e.jsxs(n.Group,{className:"mb-3",children:[e.jsx(n.Control,{type:"text",placeholder:"Enter Token",name:"token",value:s.values.token,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:!!s.errors.token&&s.touched.token}),e.jsx(n.Control.Feedback,{type:"invalid",children:s.errors.token})]}),c&&e.jsx(S,{variant:"danger",className:"mb-3",children:c}),e.jsx(g,{variant:"primary",type:"submit",className:"btn-block mb-4",disabled:s.isSubmitting,children:"Activate"})]}),e.jsx("p",{className:"mb-2 text-muted",children:e.jsx(m,{to:"/auth/resend-token",className:"f-w-400",children:"Re-send activate token?"})}),e.jsxs("p",{className:"mb-2 text-muted",children:["Already have an account?"," ",e.jsx(m,{to:"/auth/signin",className:"f-w-400",children:"Login"})]})]})]})})})]})})})};export{$ as default};
